<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Typing Speed Game</title>
  <style>
    body {
      margin: 0;
      background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
      background-size: 400% 400%;
      animation: gradientMove 12s ease infinite;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      font-family: Arial, sans-serif;
    }

    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    canvas {
      background: #000;
      display: block;
      border: 3px solid white;
      box-shadow: 0px 0px 20px rgba(255, 255, 255, 0.3);
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>
  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    canvas.width = 550;
    canvas.height = 450;

    let words = ["hello", "speed", "game", "type", "javascript", "fast", "keyboard", "win", "coding", "skill", "table", "water", "phone", "school", "bread", "money", "door", "shirt", "pen", "bag", "coffee", "clock", "shoes", "light", "book", "dark", "apple", "car", "rtd"];
    let activeWords = [];
    let typedWord = "";
    let score = 0;
    let lives = 5;
    let speed = 0.8;
    let gameState = "playing";
    let spawnTimer = 0;
    let spawnDelay = 120;
    let totalTypedWords = 0;
    let particles = [];

    document.addEventListener("keydown", keyHandler);

    function keyHandler(e) {
      if (gameState === "gameover" && e.key === "Enter") {
        restartGame();
        return;
      }

      if (e.key === "Backspace") {
        typedWord = typedWord.slice(0, -1);
      } else if (e.key === "Enter" || e.key === " ") {
        checkWord();
      } else if (/^[a-zA-Z]$/.test(e.key)) {
        typedWord += e.key.toLowerCase();
      }
    }

    function spawnWord() {
      let word = words[Math.floor(Math.random() * words.length)];
      let x;
      let validPosition = false;

      while (!validPosition) {
        x = Math.random() * (canvas.width - 100);
        validPosition = true;
        for (let w of activeWords) {
          if (Math.abs(w.x - x) < 80 && w.y < 50) {
            validPosition = false;
            break;
          }
        }
      }

      activeWords.push({ text: word, x: x, y: 0 });
    }

    function createParticles(x, y, color) {
      for (let i = 0; i < 20; i++) {
        particles.push({
          x: x,
          y: y,
          dx: (Math.random() - 0.5) * 4,
          dy: (Math.random() - 0.5) * 4,
          life: 30,
          color: color
        });
      }
    }

    function checkWord() {
      if (typedWord.trim() === "") return;
      totalTypedWords++;
      for (let i = 0; i < activeWords.length; i++) {
        if (typedWord.trim() === activeWords[i].text) {
          score++;
          createParticles(activeWords[i].x + 30, activeWords[i].y, "#00ffcc");
          activeWords.splice(i, 1);
          typedWord = "";
          if (score % 5 === 0 && speed < 3) speed += 0.2;
          return;
        }
      }
      typedWord = "";
    }

    function update() {
      if (gameState !== "playing") return;

      spawnTimer++;
      if (spawnTimer > spawnDelay) {
        spawnWord();
        spawnTimer = 0;
      }

      activeWords.forEach((w, i) => {
        w.y += speed;
        if (w.y > canvas.height - 20) {
          lives--;
          activeWords.splice(i, 1);
          if (lives <= 0) {
            gameState = "gameover";
          }
        }
      });

      particles.forEach((p, index) => {
        p.x += p.dx;
        p.y += p.dy;
        p.life--;
        if (p.life <= 0) particles.splice(index, 1);
      });
    }

    function drawWords() {
      ctx.font = "20px Arial Black";
      ctx.fillStyle = "#FFD700";
      activeWords.forEach(w => {
        ctx.fillText(w.text, w.x, w.y);
      });
    }

    function drawParticles() {
      particles.forEach(p => {
        ctx.beginPath();
        ctx.arc(p.x, p.y, 3, 0, Math.PI * 2);
        ctx.fillStyle = p.color;
        ctx.fill();
      });
    }

    function drawUI() {
      ctx.font = "16px Arial";
      ctx.fillStyle = "#fff";
      ctx.fillText("Score: " + score, 10, 20);
      ctx.fillText("Lives: " + lives, 420, 20);

      ctx.font = "18px Arial";
      ctx.fillStyle = "#00ffcc";
      ctx.fillText("Type: " + typedWord, 10, 380);
    }

    function drawGameOver() {
      ctx.font = "30px Arial Black";
      ctx.fillStyle = "#FF2E2E";
      ctx.shadowBlur = 20;
      ctx.shadowColor = "#ff0000";
      ctx.textAlign = "center";
      ctx.fillText("ðŸ˜¢ GAME OVER!", canvas.width / 2, canvas.height / 2 - 60);

      ctx.font = "18px Arial";
      ctx.fillStyle = "#fff";
      ctx.shadowBlur = 5;
      ctx.fillText("Score: " + score, canvas.width / 2, canvas.height / 2 - 20);
      ctx.fillText("Total Typed: " + totalTypedWords, canvas.width / 2, canvas.height / 2 + 10);

      let accuracy = totalTypedWords > 0 ? Math.round((score / totalTypedWords) * 100) : 0;
      ctx.fillText("Accuracy: " + accuracy + "%", canvas.width / 2, canvas.height / 2 + 40);

      ctx.fillText("Press ENTER to Restart", canvas.width / 2, canvas.height / 2 + 80);
      ctx.textAlign = "start";
      ctx.shadowBlur = 0;
    }

    function restartGame() {
      activeWords = [];
      typedWord = "";
      score = 0;
      totalTypedWords = 0;
      lives = 5;
      speed = 0.8;
      spawnTimer = 0;
      particles = [];
      gameState = "playing";
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      if (gameState === "playing") {
        update();
        drawWords();
        drawParticles();
        drawUI();
      } else {
        drawGameOver();
      }

      requestAnimationFrame(draw);
    }

    draw();
  </script>
</body>
</html>
